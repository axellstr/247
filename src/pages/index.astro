---
// Daily Stoic Landing Page
import '../styles/global.css';
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Receive a powerful stoic quote in your inbox every morning. Timeless wisdom from Marcus Aurelius, Seneca, and Epictetus." />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://dailystoic.app/" />
    <meta property="og:title" content="Daily Stoic — Morning Wisdom in Your Inbox" />
    <meta property="og:description" content="Receive a powerful stoic quote in your inbox every morning. Timeless wisdom from Marcus Aurelius, Seneca, and Epictetus." />
    <meta property="og:image" content="https://dailystoic.app/og-image.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="Daily Stoic" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://dailystoic.app/" />
    <meta name="twitter:title" content="Daily Stoic — Morning Wisdom in Your Inbox" />
    <meta name="twitter:description" content="Receive a powerful stoic quote in your inbox every morning. Timeless wisdom from Marcus Aurelius, Seneca, and Epictetus." />
    <meta name="twitter:image" content="https://dailystoic.app/og-image.png" />

    <!-- Additional SEO -->
    <meta name="author" content="Daily Stoic" />
    <meta name="keywords" content="stoicism, stoic quotes, Marcus Aurelius, Seneca, Epictetus, daily wisdom, philosophy, morning routine, meditation" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://dailystoic.app/" />
    
    <!-- Theme Color -->
    <meta name="theme-color" content="#0a0908" />
    <meta name="msapplication-TileColor" content="#0a0908" />
    
    <title>Daily Stoic —  Wisdom in Your Inbox</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&family=DM+Sans:wght@400;500;600&family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400;1,500&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  </head>
  <body>
    <!-- Atmospheric Background -->
    <div class="page-background"></div>
    
    <!-- Floating decorative elements -->
    <div class="floating-elements">
      <div class="floating-element">Σ</div>
      <div class="floating-element">Φ</div>
      <div class="floating-element">Ω</div>
    </div>

    <main class="hero">
      <div class="container">
        <div class="hero__content">
          <!-- Badge -->
          <div class="hero__badge">
            Free daily wisdom delivered at dawn
          </div>
          
          <!-- Title -->
          <h1 class="hero__title">
            Awaken each day with<br /><em>ancient wisdom</em>
          </h1>
          
          <!-- Subtitle -->
          <h2 class="hero__subtitle">
            Timeless philosophy for the modern mind.
          </h2>

          <!-- Subscribe Form -->
          <form class="subscribe-form" id="subscribe-form">
            <input 
              type="email" 
              name="email"
              class="subscribe-form__input" 
              placeholder="Enter your email address" 
              required 
              autocomplete="email"
            />
            <button type="submit" class="subscribe-form__button">
              <span>Begin Journey</span>
            </button>
          </form>
        </div>

        <!-- Message -->
        <div id="message" class="message" style="display: none;"></div>


        <!-- Quote Preview Section -->
        <section class="quote-section">
          <div class="quote-preview">
            <div class="quote-preview__label">Today's Reflection</div>
            <p class="quote-preview__text">
              "You have power over your mind — not outside events. Realize this, and you will find strength."
            </p>
            <p class="quote-preview__author">
              Marcus Aurelius
            </p>
          </div>
        </section>

        <!-- Features Section -->
        <section class="features-section">
          <div class="features-header">
            <p class="features-header__title">What you receive</p>
          </div>
          
          <div class="features">
            <div class="feature">
              <h3 class="feature__title">Morning Ritual</h3>
              <p class="feature__description">
                Start each day with intention.
              </p>
            </div>
            <div class="feature">
              <h3 class="feature__title">Curated Wisdom</h3>
              <p class="feature__description">
                Hand-selected teachings from Marcus Aurelius, Seneca, and Epictetus.
              </p>
            </div>
            <div class="feature">
              <h3 class="feature__title">Pure Simplicity</h3>
              <p class="feature__description">
                One beautiful email. No ads, no links, no fuzz.
              </p>
            </div>
          </div>
        </section>

        <!-- Philosophy Quote Divider -->
        <div class="divider-quote">
          <p class="divider-quote__text">
            "The happiness of your life depends upon the quality of your thoughts."
          </p>
          <p class="divider-quote__author">— Marcus Aurelius, Meditations</p>
        </div>
      </div>
    </main>

    <footer class="footer">
      <div class="footer__content">
        <div class="footer__links">
          <a href="/unsubscribe">Unsubscribe</a>
          <span style="color: var(--color-border-light);">·</span>
          <a href="mailto:hello@dailystoic.com">Contact</a>
        </div>
        <p class="footer__credit">
          Built with philosophy in mind
        </p>
      </div>
    </footer>

    <script>
      const form = document.getElementById('subscribe-form') as HTMLFormElement;
      const messageEl = document.getElementById('message') as HTMLDivElement;
      const button = form.querySelector('button') as HTMLButtonElement;
      const buttonText = button.querySelector('span') as HTMLSpanElement;
      const originalText = buttonText.textContent;

      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const email = (form.querySelector('input[name="email"]') as HTMLInputElement).value;
        
        // Detect user's timezone
        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone || 'UTC';
        
        // Show loading state
        button.disabled = true;
        buttonText.innerHTML = '<span class="spinner"></span>Joining...';
        messageEl.style.display = 'none';

        try {
          const response = await fetch('/api/subscribe', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, timezone }),
          });

          const data = await response.json();

          if (response.ok) {
            messageEl.className = 'message message--success';
            messageEl.textContent = data.message || 'Welcome to the journey. Your first quote awaits at dawn.';
            form.reset();
          } else {
            messageEl.className = 'message message--error';
            messageEl.textContent = data.error || 'Something went wrong. Please try again.';
          }
        } catch (error) {
          messageEl.className = 'message message--error';
          messageEl.textContent = 'Network error. Please check your connection.';
        } finally {
          button.disabled = false;
          buttonText.textContent = originalText;
          messageEl.style.display = 'block';
        }
      });
    </script>
  </body>
</html>
